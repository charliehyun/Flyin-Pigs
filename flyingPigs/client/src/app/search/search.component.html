<!-- Header -->
<div>
  <img src="favicon.ico" alt="Flyin' Pigs" style="display: block; margin-left: auto; margin-right: auto;">
  <h2>Flyin' Pigs</h2>    
</div>
<!-- 
<div>
  TESTING:<br>
  {{message}}
  <input pInputText type="text" [(ngModel)]="message">
  <button (click)="newMessage()">New Message</button>
  <br>
</div>
<br> -->

<!-- Main Search Content -->
<!-- <p-card header="Search Flights" [style]="{'background':'gray'}"> -->
<p-card header="Search Flights">
  <div>
    <p-dropdown [options]="classes" [(ngModel)]="selectedClass" placeholder="Select a Class" optionLabel="name"></p-dropdown>
              
    <p-dropdown [options]="transportType" [(ngModel)]="selectedTransport" placeholder="Select a Mode of Transport" optionLabel="name"></p-dropdown>
    
    One Way 
    <p-inputSwitch [(ngModel)]="isRoundTrip"></p-inputSwitch>
    Round Trip

    <!-- Passenger # Overlay -->
    <p-button (click)="op.toggle($event)" icon="pi pi-user" label="{{totalPass}}"></p-button>
    <p-overlayPanel #op [showCloseIcon]="true" (onHide)="updatePassengers()"> 
    <div>
      <label for="adult" class="pass1">Adults</label>
      <div class="pass2" align="right">
        <p-inputNumber [(ngModel)]="adultPass" inputId="adult" [showButtons]="true" buttonLayout="horizontal" incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" [min]=0 [size]=1></p-inputNumber>
      </div>
      <br><br><br>
      <label for="child" class="pass1">Children &nbsp;</label>
      <div class="pass2" align="right">
        <p-inputNumber [(ngModel)]="childPass" inputId="child" [showButtons]="true" buttonLayout="horizontal" incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" [min]=0 [size]=1></p-inputNumber>
      </div>
      <br><br><br>
      <label for="infant" class="pass1">Infants</label>
      <div class="pass2" align="right">
        <p-inputNumber [(ngModel)]="infantPass" inputId="infant" [showButtons]="true" buttonLayout="horizontal" incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" [min]=0 [size]=1></p-inputNumber>
      </div>
      <br><br><br>
      <p-button (onClick)="updatePassengers(); op.hide()" class="pass1">
      <i class="pi pi-check"></i>
      </p-button>
    </div>
    </p-overlayPanel>
    
    <!-- Trip Dates and Addresses -->
    
    <br>
    <!----
    <br>
    <form [formGroup]="dates" novalidate>
      <div class="form-group">
        <label class="center-block">Departure Date:
          <input class="form-control" formControlName="ddate" pInputText type="date" [(ngModel)]="ddate" id="ddate" name="ddate" required>
        </label>
      </div>
      <div *ngIf="dates.controls['ddate'].invalid && (dates.controls['ddate'].dirty || dates.controls['ddate'].touched || dates.ddate < this.date)" class="alert">
          <small class="text-danger" *ngIf="dates.controls['ddate'].errors.required">
          Please enter valid date!
          </small>
      </div>
    </form> 
    --->

    <label for="ddate">Departure Date: </label>
    <input pInputText type="date" [(ngModel)]="ddate" id="ddate" name="ddate" min="{{this.date}}" required>
    <label for="adate" *ngIf="isRoundTrip">Return Date: </label>
    <input pInputText type="date" [(ngModel)]="adate" id="adate" name="adate" min="{{this.ddate}}" *ngIf="isRoundTrip"><br>

    <label for="daddress">Departure Address: </label>
    <input pInputText type="text" [(ngModel)]="daddress" id="daddress" name="daddress" size="35" required ngx-google-places-autocomplete [options]="options" (onAddressChange)="AddressChange1($event)" [(ngModel)]="formattedaddress1">
    <label for="aaddress">Arrival Address: </label>
    <input pInputText type="text" [(ngModel)]="aaddress" id="aaddress" name="aaddress" size="35" required ngx-google-places-autocomplete [options]="options" (onAddressChange)="AddressChange2($event)" [(ngModel)]="formattedaddress2">
    <br>
    
    <!-- Transport Hours Before and After Flight -->
    <label for="drivingStartHours">Maximum {{selectedTransport.code}} Time (start):</label>
    <p-dropdown [options]="hours" [(ngModel)]="drivingStartHours" optionLabel="name"></p-dropdown>
    <label for="drivingEndHours">Maximum {{selectedTransport.code}} Time (end):</label>
    <p-dropdown [options]="hours" [(ngModel)]="drivingEndHours" optionLabel="name"></p-dropdown>
    
  </div>
  <div align="center">
    <button pButton pRipple type="button" (click)="handleClear()" label="Clear Search" class="p-button-outlined"></button>
    <button pButton pRipple type="button" routerLink="/results" label="Search"></button>
  </div>
</p-card>

<div>
  backend call:
  <p-button (click)="FilterAirports()">Filter My Airports</p-button>
  <tr *ngFor="let airport of filteredAirports$ | async" >
    <td>{{airport.City}}</td>
    <td>{{airport.State}}</td>
  </tr>
</div>
